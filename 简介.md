## 基本介绍

`Nginx`是一个高性能的`HTTP`和**反向代理**`Web`服务器，也提供了`IMAP / POP3 / SMTP`服务，由伊戈尔·赛索耶夫为俄罗斯访问量第二的`Rambler.ru`站点而开发，第一个公开版本`0.1.0`发布于`2004年10月4日`，特点是占有内存少，并发能力强，专为性能优化而开发，稳定性和低系统资源消耗，以及对`HTTP`并发连接的高处理能力，可支持单台高达`50000`个并发连接数。

### 反向代理

Nginx最让你耳熟能详的两个词——`负载均衡服务器`或者`反向代理服务器`，先聊一聊反向代理



![proxy](https://osskeagan.oss-cn-shanghai.aliyuncs.com/img/proxy.png)

**正向代理：** 也称作代理，是位于客户端和目标服务器之间，起到一个中转的作用。其实就是客户端想访问目标服务器，但是因为某些原因不能够直接访问，则把请求和目标服务器发给代理服务器，代理服务器再去请求目标服务器，把返回的响应结果返回给客户端。

![reverse-proxy](https://osskeagan.oss-cn-shanghai.aliyuncs.com/img/reverse-proxy.png)

**反向代理：**客户端把反向代理服务器当作目标服务器，向反向代理服务器发送请求后，反向代理服务器再把响应结果返回给客户端。反向代理则是客户端不知道在访问的真实目标服务器是什么



由此可见反向代理有着以下特性：

- 安全性：反向代理具有安全性。能隐藏真实的内部服务器。
- 功能性；正向代理主要用途是为防火墙内的局域网用户提供访问外网的途径。反向代理主要用途是将防火墙内的服务器提供给外边的用户访问，同时也可以为多个后端服务器提供负载均衡功能、缓存功能等。

### 负载均衡

负载均衡(load balance) : 就是将负载分摊到多个操作单元上执行，从而提高服务的可用性和响应速度

- 没有负载均衡的Web架构图：

![nginx.no-load-balance](https://osskeagan.oss-cn-shanghai.aliyuncs.com/img/nginx.no-load-balance.png)

客户端直接连接服务器，这个时候如果这个服务器挂了，那么整个网站就挂了

- 具有负载均衡的Web架构图

![nginx.loader.balance](https://osskeagan.oss-cn-shanghai.aliyuncs.com/img/nginx.loader.balance.png)

客户端不直接访问后端服务器，而是访问负载均衡服务器，由负载均衡服务器再次转发到后端服务器群组。如果这个时候有一台后端服务器挂掉了，那么负载均衡服务器会剔除掉它，将后续请求都转发到正常运行的机器，从而避免服务请求失败。

当然为了避免负载均衡服务器挂掉，还可以设置多个负载均衡服务器作为辅助。




## 为什么选择Nginx

### 占用资源更少

相比 Apache，Nginx 使用资源更少，支持更多的并发连接数。在高并发的情况下，Nginx 采用`C语言`编写，无论在系统资源开销还是`CPU`使用效率要好很多

### 配置简单

Nginx 启动容易，几乎可以做到`7*24`小时不间断运行，即便很长时间未重新启动，也能够在不间断服务的情况下对软件版本进行升级，静态处理性能要比 Apache 高 3倍以上

### 核心点

Nginx 是异步的，多连接可对应一个进程；
Apache 是同步多进程模型，一个连接对应一个进程；

### 擅长领域

Nginx 适用于前端处理静态请求；
Apache 适用于后端处理动态请求；



## Nginx 的安装配置

> 在此之前，很多Nginx的教程都是在CentOS上进行配置，但是由于CentOS停止维护后，开始采用Ubuntu作为服务器主系统，以下教程全部以Ubuntu 22系统作为基础进行操作。

